<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Home | {{ DASHBOARD_NAME }}</title>
    {% load home_tags %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/homeStyle.css' %}" />
    <link rel="shortcut icon" type="image/x-icon" href="{% static 'favicon.ico' %}" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  </head>
  <body class="body-background" data-update-url="{% url 'update_usage' %}" data-csrf-token="{{ csrf_token }}">
    <div class="fade-appear">
      <div class="top-bar d-flex justify-content-between">
        <div class="left-top-bar-elements">
          <img class="pmc-logo" src="{% static 'images/pmc_logo.png' %}" alt="PMC Logo" />
          <h1 id="dashboard_title" class="dashboard-title">{{ DASHBOARD_NAME }}</h1>
          <div class="top-bar-menu-item-div active" id="menu-home">
            <a href="#" class="top-bar-menu-item" data-target="homeContent">Home</a>
          </div>
          <div class="top-bar-menu-item-div" id="menu-applications">
            <a href="#" class="top-bar-menu-item" data-target="applicationsContent">Applications</a>
          </div>
        </div>
        <div class="right-top-bar-elements">
          <span class="top-right-text">Welcome, {{ user.first_name }} {{ user.last_name }}!</span>
          <div class="notification-icon-dropdown">
            <div class="icon-with-badge">
              <img src="{% static 'images/notification_icon.png' %}" alt="Notification Icon" class="notification-icon" />
              <span class="notification-badge">2</span>
            </div>
            <div class="notification-dropdown-content">
              <div style="backdrop-filter: blur(10px);">
                <span class="notification-span">ðŸš¨ Your property tax is due!</span>
                <div class="notification-divider"></div>
                <span class="notification-span">ðŸš¨ Your electricity usage went up by 10%!</span>
                <div class="notification-divider"></div>
              </div>
            </div>
          </div>
          <div class="settings-icon-dropdown">
            <img src="{% static 'images/settings_icon.png' %}" alt="Settings Icon" class="settings-icon" />
            <div class="settings-dropdown-content">
              <div style="backdrop-filter: blur(10px);">
                <a href="#profile"><i class="fas fa-user-circle"></i> Profile</a>
                <a href="#settings"><i class="fas fa-cog"></i> Settings</a>
                <form id="logout-form" action="{% url 'logout' %}" method="post" style="display: none;">
                  {% csrf_token %}
                  <input type="submit" style="display: none;" value="Logout" />
                </form>
                <a href="#" onclick="document.getElementById('logout-form').submit(); return false;"><i class="fas fa-sign-out-alt"></i> Logout</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="homeContent" class="content-container">Hello</div>
      <div id="applicationsContent" class="content-container" style="display:none;">
        <div class="frequently-used-applications">
          <div class="section-header">
            <h2>Frequently Used Applications</h2>
            <span class="line"></span>
          </div>
          <div class="ag-courses_box">
            {% for app in frequently_used %}
              <div class="ag-courses_item">
                <a href="{% url app.application_name|application_url %}" class="ag-courses-item_link" data-app-name="{{ app.application_name }}" style="background-image: url('{{ app.application_name|static_image_url }}');">
                  <div class="ag-courses-item_bg"></div>
                  <div class="ag-courses-item_title">{{ app.application_name }}</div>
                </a>
              </div>
            {% endfor %}
          </div>
        </div>
        <div class="all-applications">
          <div class="section-header">
            <h2>All Applications</h2>
            <span class="line"></span>
          </div>
          <div class="ag-courses_box">
            {% for app_name in all_applications %}
              <div class="ag-courses_item">
                <a href="{% url app_name|application_url %}" class="ag-courses-item_link" data-app-name="{{ app_name }}" style="background-image: url('{{ app_name|static_image_url }}');">
                  <div class="ag-courses-item_bg"></div>
                  <div class="ag-courses-item_title">{{ app_name }}</div>
                </a>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.min.js"></script>
    <script src="{% static 'js/home.js' %}" type="text/javascript"></script>
  </body>
</html>
